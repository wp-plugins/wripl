(function(){var h=void 0,j=!0,l=null,o=!1,q,r=this;
function s(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c}function t(a){return"array"==s(a)}function aa(a){var c=s(a);return"array"==c||"object"==c&&"number"==typeof a.length}var u="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),w=0;function ba(a,c,b){return a.call.apply(a.bind,arguments)}
function ca(a,c,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}}function x(a,c,b){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ba:ca;return x.apply(l,arguments)}var da=Date.now||function(){return+new Date};
function ea(a,c){function b(){}b.prototype=c.prototype;a.ba=c.prototype;a.prototype=new b};var fa=/^[a-zA-Z0-9\-_.!~*'()]*$/;function y(a){a=""+a;return!fa.test(a)?encodeURIComponent(a):a};var z=Array.prototype,ga=z.indexOf?function(a,c,b){return z.indexOf.call(a,c,b)}:function(a,c,b){b=b==l?0:0>b?Math.max(0,a.length+b):b;if("string"==typeof a)return"string"!=typeof c||1!=c.length?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};function ha(a,c){for(var b=1;b<arguments.length;b++){var d=arguments[b],f;if(t(d)||(f=aa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var e=a.length,g=d.length,i=0;i<g;i++)a[e+i]=d[i];else a.push(d)}};function A(a,c){this.f={};this.c=[];var b=arguments.length;if(1<b){if(b%2)throw Error("Uneven number of arguments");for(var d=0;d<b;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var f;if(a instanceof A)f=a.m(),d=a.n();else{var b=[],e=0;for(f in a)b[e++]=f;f=b;b=[];e=0;for(d in a)b[e++]=a[d];d=b}for(b=0;b<f.length;b++)this.set(f[b],d[b])}}q=A.prototype;q.a=0;q.ca=0;q.n=function(){ia(this);for(var a=[],c=0;c<this.c.length;c++)a.push(this.f[this.c[c]]);return a};q.m=function(){ia(this);return this.c.concat()};
q.h=function(a){return Object.prototype.hasOwnProperty.call(this.f,a)};function ia(a){if(a.a!=a.c.length){for(var c=0,b=0;c<a.c.length;){var d=a.c[c];Object.prototype.hasOwnProperty.call(a.f,d)&&(a.c[b++]=d);c++}a.c.length=b}if(a.a!=a.c.length){for(var f={},b=c=0;c<a.c.length;)d=a.c[c],Object.prototype.hasOwnProperty.call(f,d)||(a.c[b++]=d,f[d]=1),c++;a.c.length=b}}q.get=function(a,c){return Object.prototype.hasOwnProperty.call(this.f,a)?this.f[a]:c};
q.set=function(a,c){Object.prototype.hasOwnProperty.call(this.f,a)||(this.a++,this.c.push(a),this.ca++);this.f[a]=c};function ja(a,c,b){this.i=a||l;this.N=c||l;this.U=!!b}function B(a){if(!a.b&&(a.b=new A,a.a=0,a.i))for(var c=a.i.split("&"),b=0;b<c.length;b++){var d=c[b].indexOf("="),f=l,e=l;0<=d?(f=c[b].substring(0,d),e=c[b].substring(d+1)):f=c[b];f=decodeURIComponent(f.replace(/\+/g," "));f=C(a,f);a.add(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}q=ja.prototype;q.b=l;q.a=l;
q.add=function(a,c){B(this);ka(this);a=C(this,a);if(this.h(a)){var b=this.b.get(a);t(b)?b.push(c):this.b.set(a,[b,c])}else this.b.set(a,c);this.a++;return this};q.h=function(a){B(this);a=C(this,a);return this.b.h(a)};q.m=function(){B(this);for(var a=this.b.n(),c=this.b.m(),b=[],d=0;d<c.length;d++){var f=a[d];if(t(f))for(var e=0;e<f.length;e++)b.push(c[d]);else b.push(c[d])}return b};
q.n=function(a){B(this);if(a)if(a=C(this,a),this.h(a)){var c=this.b.get(a);if(t(c))return c;a=[];a.push(c)}else a=[];else for(var c=this.b.n(),a=[],b=0;b<c.length;b++){var d=c[b];t(d)?ha(a,d):a.push(d)}return a};q.set=function(a,c){B(this);ka(this);a=C(this,a);if(this.h(a)){var b=this.b.get(a);t(b)?this.a-=b.length:this.a--}this.b.set(a,c);this.a++;return this};q.get=function(a,c){B(this);a=C(this,a);if(this.h(a)){var b=this.b.get(a);return t(b)?b[0]:b}return c};
q.toString=function(){if(this.i)return this.i;if(!this.b)return"";for(var a=[],c=0,b=this.b.m(),d=0;d<b.length;d++){var f=b[d],e=y(f),f=this.b.get(f);if(t(f))for(var g=0;g<f.length;g++)0<c&&a.push("&"),a.push(e),""!==f[g]&&a.push("=",y(f[g])),c++;else 0<c&&a.push("&"),a.push(e),""!==f&&a.push("=",y(f)),c++}return this.i=a.join("")};function ka(a){delete a.ea;delete a.i;a.N&&delete a.N.da}function C(a,c){var b=""+c;a.U&&(b=b.toLowerCase());return b};var D,E,F,G;function la(){return r.navigator?r.navigator.userAgent:l}G=F=E=D=o;var H;if(H=la()){var ma=r.navigator;D=0==H.indexOf("Opera");E=!D&&-1!=H.indexOf("MSIE");F=!D&&-1!=H.indexOf("WebKit");G=!D&&!F&&"Gecko"==ma.product}var I=E,J=G,na=F,oa=r.navigator,pa=-1!=(oa&&oa.platform||"").indexOf("Mac"),K;
a:{var L="",M;if(D&&r.opera)var N=r.opera.version,L="function"==typeof N?N():N;else if(J?M=/rv\:([^\);]+)(\)|;)/:I?M=/MSIE\s+([^\);]+)(\)|;)/:na&&(M=/WebKit\/(\S+)/),M)var qa=M.exec(la()),L=qa?qa[1]:"";if(I){var ra,sa=r.document;ra=sa?sa.documentMode:h;if(ra>parseFloat(L)){K=""+ra;break a}}K=L}var ta={};
function ua(a){if(!ta[a]){for(var c=0,b=(""+K).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(b.length,d.length),e=0;0==c&&e<f;e++){var g=b[e]||"",i=d[e]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var p=k.exec(g)||["","",""],n=m.exec(i)||["","",""];if(0==p[0].length&&0==n[0].length)break;c=((0==p[1].length?0:parseInt(p[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==
n[1].length?0:parseInt(n[1],10))?1:0)||((0==p[2].length)<(0==n[2].length)?-1:(0==p[2].length)>(0==n[2].length)?1:0)||(p[2]<n[2]?-1:p[2]>n[2]?1:0)}while(0==c)}ta[a]=0<=c}}var va={};function O(){return va[9]||(va[9]=I&&document.documentMode&&9<=document.documentMode)};function wa(){}var xa=0;q=wa.prototype;q.key=0;q.j=o;q.z=o;q.p=function(a,c,b,d,f,e){if("function"==s(a))this.H=j;else if(a&&a.handleEvent&&"function"==s(a.handleEvent))this.H=o;else throw Error("Invalid listener argument");this.q=a;this.L=c;this.src=b;this.type=d;this.capture=!!f;this.F=e;this.z=o;this.key=++xa;this.j=o};q.handleEvent=function(a){return this.H?this.q.call(this.F||this.src,a):this.q.handleEvent.call(this.q,a)};!I||O();var ya=!I||O();I&&ua("8");function P(){}P.prototype.C=o;P.prototype.k=function(){if(!this.C)this.C=j,this.l()};P.prototype.l=function(){this.P&&za.apply(l,this.P)};function za(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c];aa(d)?za.apply(l,d):d&&"function"==typeof d.k&&d.k()}};function Q(a,c){this.type=a;this.currentTarget=this.target=c}ea(Q,P);Q.prototype.l=function(){delete this.type;delete this.target;delete this.currentTarget};Q.prototype.w=o;Q.prototype.$=j;function Aa(a){Aa[" "](a);return a}Aa[" "]=function(){};function R(a,c){a&&this.p(a,c)}ea(R,Q);q=R.prototype;q.target=l;q.relatedTarget=l;q.offsetX=0;q.offsetY=0;q.clientX=0;q.clientY=0;q.screenX=0;q.screenY=0;q.button=0;q.keyCode=0;q.charCode=0;q.ctrlKey=o;q.altKey=o;q.shiftKey=o;q.metaKey=o;q.Z=o;q.D=l;
q.p=function(a,c){var b=this.type=a.type;Q.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(J){var f;a:{try{Aa(d.nodeName);f=j;break a}catch(e){}f=o}f||(d=l)}}else if("mouseover"==b)d=a.fromElement;else if("mouseout"==b)d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==b?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Z=pa?a.metaKey:a.ctrlKey;this.state=a.state;this.D=a;delete this.$;delete this.w};q.l=function(){R.ba.l.call(this);this.relatedTarget=this.currentTarget=this.target=this.D=l};var T={},U={},V={},W={};
function X(a,c,b,d,f){if(c)if(t(c))for(var e=0;e<c.length;e++)X(a,c[e],b,d,f);else{var d=!!d,g=U;c in g||(g[c]={a:0,g:0});g=g[c];d in g||(g[d]={a:0,g:0},g.a++);var g=g[d],i=a[u]||(a[u]=++w),k;g.g++;if(g[i]){k=g[i];for(e=0;e<k.length;e++)if(g=k[e],g.q==b&&g.F==f){if(g.j)break;return}}else k=g[i]=[],g.a++;e=Ba();e.src=a;g=new wa;g.p(b,e,a,c,d,f);b=g.key;e.key=b;k.push(g);T[b]=g;V[i]||(V[i]=[]);V[i].push(g);a.addEventListener?(a==r||!a.O)&&a.addEventListener(c,e,d):a.attachEvent(c in W?W[c]:W[c]="on"+
c,e)}else throw Error("Invalid event type");}function Ba(){var a=Ca,c=ya?function(b){return a.call(c.src,c.key,b)}:function(b){b=a.call(c.src,c.key,b);if(!b)return b};return c}function Da(a,c,b,d){if(!d.r&&d.K){for(var f=0,e=0;f<d.length;f++)d[f].j?d[f].L.src=l:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.K=o;0==e&&(delete U[a][c][b],U[a][c].a--,0==U[a][c].a&&(delete U[a][c],U[a].a--),0==U[a].a&&delete U[a])}}
function Ea(a,c,b,d,f){var e=1,c=c[u]||(c[u]=++w);if(a[c]){a.g--;a=a[c];a.r?a.r++:a.r=1;try{for(var g=a.length,i=0;i<g;i++){var k=a[i];k&&!k.j&&(e&=Fa(k,f)!==o)}}finally{a.r--,Da(b,d,c,a)}}return Boolean(e)}
function Fa(a,c){var b=a.handleEvent(c);if(a.z){var d=a.key;if(T[d]){var f=T[d];if(!f.j){var e=f.src,g=f.type,i=f.L,k=f.capture;e.removeEventListener?(e==r||!e.O)&&e.removeEventListener(g,i,k):e.detachEvent&&e.detachEvent(g in W?W[g]:W[g]="on"+g,i);e=e[u]||(e[u]=++w);i=U[g][k][e];if(V[e]){var m=V[e],p=ga(m,f);0<=p&&z.splice.call(m,p,1);0==m.length&&delete V[e]}f.j=j;i.K=j;Da(g,k,e,i);delete T[d]}}}return b}
function Ca(a,c){if(!T[a])return j;var b=T[a],d=b.type,f=U;if(!(d in f))return j;var f=f[d],e,g;if(!ya){var i;if(!(i=c))a:{i="window.event".split(".");for(var k=r;e=i.shift();)if(k[e]!=l)k=k[e];else{i=l;break a}i=k}e=i;i=j in f;k=o in f;if(i){if(0>e.keyCode||e.returnValue!=h)return j;a:{var m=o;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(p){m=j}if(m||e.returnValue==h)e.returnValue=j}}m=new R;m.p(e,this);e=j;try{if(i){for(var n=[],S=m.currentTarget;S;S=S.parentNode)n.push(S);g=f[j];g.g=g.a;for(var v=
n.length-1;!m.w&&0<=v&&g.g;v--)m.currentTarget=n[v],e&=Ea(g,n[v],d,j,m);if(k){g=f[o];g.g=g.a;for(v=0;!m.w&&v<n.length&&g.g;v++)m.currentTarget=n[v],e&=Ea(g,n[v],d,o,m)}}else e=Fa(b,m)}finally{if(n)n.length=0;m.k()}return e}d=new R(c,this);try{e=Fa(b,d)}finally{d.k()}return e};!I||O();!J&&!I||I&&O()||J&&ua("1.9.1");I&&ua("9");function Ga(){this.aa=da();this.u=0;this.G=this.o=l;this.I=this.touches=this.B=this.M=this.A=0;this.document=document;X(this.document,"click",this.V,o,this);X(this.document,"scroll",this.X,o,this);X(this.document,"copy",this.v,o,this);X(this.document,"cut",this.v,o,this);X(this.document,"paste",this.v,o,this);X(this.document,"touchstart",this.Y,o,this);X(this.document,"keydown",this.W,o,this);X(window,"focus",this.S,o,this);X(window,"blur",this.T,o,this);X(this.document,"mousemove",this.e,o,this);
this.e()}q=Ga.prototype;q.V=function(){this.A++;this.e()};q.X=function(){this.M++;this.e()};q.v=function(){this.B++;this.e()};q.Y=function(){this.touches++;this.e()};q.W=function(){this.I++;this.e()};q.T=function(){Ha(this)};q.S=function(){clearInterval(this.o);this.e()};function Ha(a){clearInterval(a.o);a.o=setInterval(x(function(){this.u+=1E3},a),1E3)}q.e=function(){clearInterval(this.o);clearTimeout(this.G);this.G=setTimeout(x(function(){Ha(this)},this),5E3)};function Ia(a){this.s=a.s;this.R=a.Q||"http://api.wripl.com/v0.1/activity-update";this.d=a.d;this.J=0;this.t=2E3}
function Ja(a){setInterval(x(function(){var a=activeTime=da()-this.d.aa-this.d.u;if(a!==this.J&&a>=this.t){var b=new ja;b.add("activity_hash_id",this.s);b.add("activity_time",parseInt(a/1E3));b.add("scroll",this.d.M);b.add("click",this.d.A);b.add("touch",this.d.touches);b.add("cut_copy_paste",this.d.B);b.add("key_press",this.d.I);b=this.R+"?"+b.toString();(new Image).src=b;this.J=a;this.t*=2}},a),1E3)};function Ka(a){var c=new Ga;Ja(new Ia({d:c,s:a.activityHashId,Q:a.endpoint}))}var Y="wripl.main".split("."),Z=r;!(Y[0]in Z)&&Z.execScript&&Z.execScript("var "+Y[0]);for(var $;Y.length&&($=Y.shift());)!Y.length&&Ka!==h?Z[$]=Ka:Z=Z[$]?Z[$]:Z[$]={};})();
